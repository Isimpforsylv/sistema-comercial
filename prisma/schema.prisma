// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Usuarios {
  id           Int      @id @default(autoincrement())
  nome         String   @db.VarChar(255)
  email        String   @unique @db.VarChar(255)
  senha        String   @db.VarChar(255)
  admin        Boolean  @default(false)
  criadoem     DateTime @default(now())
  atualizadoem DateTime @updatedAt

  @@map("usuarios")
}

model EmpresasGrupo {
  id        Int       @id @default(autoincrement())
  nomegrupo String    @db.VarChar(255)
  empresas  Empresas[]

  @@map("empresas_grupo")
}

model Empresas {
  id             Int             @id @default(autoincrement())
  idgrupo        Int?
  nomeempresa    String          @db.VarChar(255)
  codigoempresa  String          @db.VarChar(100)
  cliente        Boolean         @default(false)
  criadopor      String          @db.VarChar(255)
  criadoem       DateTime        @default(now())
  atualizadoem   DateTime        @updatedAt
  
  grupo          EmpresasGrupo?  @relation(fields: [idgrupo], references: [id])

  propostasAceitas PropostasAceitas[]

  @@map("empresas")
}

model PropostasAceitas {
  id           Int      @id @default(autoincrement())
  idempresa    Int
  nomeproposta String   @db.VarChar(255)
  criadoem     DateTime @default(now())
  atualizadoem DateTime @updatedAt

  empresa      Empresas @relation(fields: [idempresa], references: [id])
  informacoes  InformacoesPropostasAceitas?

  @@map("propostas_aceitas")
}

model InformacoesPropostasAceitas {
  id            Int      @id @default(autoincrement())
  idproposta    Int      @unique
  empresa       String   @db.VarChar(255)
  pais          String   @db.VarChar(100)
  estado        String   @db.VarChar(100)
  cidade        String   @db.VarChar(255)
  endereco      String   @db.VarChar(500)
  contato       String   @db.VarChar(255)
  email         String   @db.VarChar(255)
  telefone      String   @db.VarChar(50)
  linkwiki      String   @db.VarChar(500)
  caminhopasta  String   @db.VarChar(500) @default("\\\\serverideia2\\Comercial")
  dataaceite    DateTime @default(now())
  criadopor     String   @db.VarChar(255) @default("Sistema")
  atualizadopor String   @db.VarChar(255) @default("Sistema")
  criadoem      DateTime @default(now())
  atualizadoem  DateTime @updatedAt

  proposta      PropostasAceitas @relation(fields: [idproposta], references: [id])

  @@map("informacoespropostas_aceitas")
}
